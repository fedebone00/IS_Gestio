(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{5557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(1624)}])},1624:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x}});var r=n(5893),i=n(4051),a=n.n(i),s=n(7294),o=n(5675),l=n.n(o),c=n(1163),u=n.n(c);function d(e,t,n,r,i,a,s){try{var o=e[a](s),l=o.value}catch(c){return void n(c)}o.done?t(l):Promise.resolve(l).then(r,i)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function s(e){d(a,r,i,s,o,"next",e)}function o(e){d(a,r,i,s,o,"throw",e)}s(void 0)}))}}function h(e){if(e){var t=e.split(".")[1].replace("-","+").replace("_","/");return JSON.parse(window.atob(t))}}function p(){var e=(0,s.useState)(""),t=e[0],i=e[1],o=(0,s.useState)(""),c=o[0],d=o[1],p=(0,s.useState)(!1),x=p[0],g=p[1],m=(0,s.useState)(""),j=m[0];m[1];function v(){return(v=f(a().mark((function e(r){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.preventDefault();try{g(!0),n(129),n(9669)({method:"POST",url:"http://gestio-is.herokuapp.com/api/v1/login",data:{email:t,password:c}}).then((function(e){var t=e.data;localStorage.setItem("jwt",t.jwt),localStorage.setItem("rt",t.rt),"AA"==h(t.jwt).role&&(console.log("Entrato nella condizione AA"),u().push("/areaAmministratoreAziendale")),"DIP0"!=h(t.jwt).role&&"DIP1"!=h(t.jwt).role||(console.log("Entrato nella condizione DIP"),u().push("/areaDipendente"))}))}catch(i){console.log(i)}finally{g(!1)}console.log("email:",t),console.log("Password: ",c);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,r.jsxs)("div",{children:[(0,r.jsx)(l(),{layout:"fill",className:"object-center object-cover pointer-events-none",src:"/../public/bg.png",alt:"title"}),(0,r.jsx)("form",{onSubmit:function(e){return v.apply(this,arguments)},children:(0,r.jsxs)("fieldset",{className:" relative z-1 p-3 flex flex-col space-y-3 justify-center items-center h-screen",children:[(0,r.jsx)(l(),{src:"/../public/logo1.png",alt:"GESTIO",width:155,height:130}),(0,r.jsx)("div",{className:" p-2 border rounded flex flex-row justify-center items-center",children:(0,r.jsx)("input",{type:"text",id:"usernameInput",placeholder:"Username",onChange:function(e){return i(e.target.value)}})}),(0,r.jsx)("div",{className:"border p-2 rounded flex flex-row justify-center items-center ",children:(0,r.jsx)("input",{type:"password",id:"passwordInput",placeholder:"Password",onChange:function(e){return d(e.target.value)}})}),j&&(0,r.jsx)("div",{role:"alert",children:j}),(0,r.jsxs)("div",{className:"flex flex-col justify-between gap-4",children:[(0,r.jsx)("button",{type:"submit",disabled:x,className:"flex py-2 inline-block px-28 bg-gray-200 text-gray-700 font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-gray-400 hover:shadow-lg focus:bg-gray-400 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-gray-400 active:shadow-lg transition duration-150 ease-in-out",children:"LOGIN"}),(0,r.jsx)("a",{href:"/recuperoCredenziali",children:(0,r.jsx)("h6",{className:"text-right",children:"Password dimenticata?"})})]})]})})]})}function x(){return(0,r.jsxs)("div",{children:[(0,r.jsx)(p,{}),(0,r.jsx)("br",{}),(0,r.jsx)("br",{}),(0,r.jsx)("h1",{children:"Da togliere perch\xe8 gestito on the fly"}),(0,r.jsx)("a",{href:"areaAmministratoreAziendale",children:(0,r.jsx)("h3",{className:" text-gray-400 inline-flex items-center justify-center",children:"Area Amministratore Aziendale"})}),(0,r.jsx)("a",{href:"areaDipendente",children:(0,r.jsx)("h3",{className:" text-gray-400 inline-flex items-center justify-center",children:"Area Dipendente"})})]})}},4654:function(){}},function(e){e.O(0,[873,669,129,774,888,179],(function(){return t=5557,e(e.s=t);var t}));var t=e.O();_N_E=t}]);