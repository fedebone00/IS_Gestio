language: node_js
node_js:
- 16
cache:
  directories:
  - node_modules
script:
- npm run build
after_success:
  - git config --global user.name 'Automated CICD'
  - git config --global user.email noreply@noone.com
  - git rm -r --ignore-unmatch */*
  - git checkout -b build
  - git add -f .next
  - git commit -m "Automatically generated build"
  - git remote add origin-pages https://${GH_TOKEN}@github.com/MVSE-outreach/resources.git > /dev/null 2>&1
  - git push --quiet --set-upstream origin-pages gh-pages