language: node_js
node_js:
- 16
cache:
  directories:
  - node_modules
script:
- npm run build
after_success:
  - git config --global user.name 'Automated CICD'
  - git config --global user.email noreply@noone.com
  - git rm -r --ignore-unmatch */*
  - git checkout -b build
  - git add -f .next
  - if [[ $(git status --porcelain) ]]; then git commit -am "Automatically generated files" && git push origin build; fi